; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[env:uno]
platform = atmelavr
board = uno
framework = arduino
monitor_speed = 115200

; Build flags for better code quality
build_flags =
  -Wall                    ; Enable all warnings
  -Wextra                  ; Extra warnings
  -Wpedantic               ; Strict ISO C++ compliance warnings
  -Wunused                 ; Warn on unused variables/functions
  -Wshadow                 ; Warn if local variable shadows another
  -Wformat=2               ; Check printf/scanf format strings
  -Wno-unused-parameter    ; Don't warn on unused parameters (common in callbacks)
  -fno-exceptions          ; Disable C++ exceptions (saves memory on AVR)
  -fno-threadsafe-statics  ; Disable thread-safe static initialization (saves memory)
  
[env:native]
platform = native
build_flags =
  -Wall
  -Wextra
  -Wpedantic
  -Wunused
  -Wshadow
  -Wformat=2
  -Inative_arduino
test_build_src = yes
; Only build host-safe code from src/obd for native tests
build_src_filter =
  +<obd/Model/*>
; Additional recommended flags for optimization (comment out for debugging)
; build_flags =
;   -Os                    ; Optimize for size
;   -flto                  ; Link-time optimization
;   -ffunction-sections    ; Place each function in its own section
;   -fdata-sections        ; Place each data item in its own section
;   -Wl,--gc-sections      ; Remove unused sections at link time
